var usinCustomFieldsApp=angular.module("usinCustomFieldsApp",["usinNgHelpers","usinPartials"],usinHelpers.config.httpProvider).config(usinHelpers.config.animateProvider).config(usinHelpers.config.mdThemingProvider).value("options",{}).run(["options",function(a){var b=window.USIN;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}]);usinCustomFieldsApp.directive("usinFieldForm",["options","$templateCache",function(a,b){return{template:b.get("views/custom-fields/field-form.html"),scope:{field:"=",mode:"@"},link:function(b,c,d){b.strings=a.strings,b.fieldTypes=a.fieldTypes,b.customTemplates=a.customTemplates}}}]),usinCustomFieldsApp.directive("usinFieldRow",["options","UsinCustomFieldsQuery","$templateCache",function(a,b,c){return{restrict:"A",template:c.get("views/custom-fields/field-row.html"),scope:{field:"=",onFieldsChange:"&"},link:{pre:function(c,d,e){c.strings=a.strings,c.fieldTypes=a.fieldTypes,c.loading=!1,c.errorMsg="",c.editing=!1,c.getTypeName=function(a){for(var b in c.fieldTypes)if(c.fieldTypes[b].type==a)return c.fieldTypes[b].name;return a},c.deleteField=function(){c.loading||(c.loading=!0,c.errorMsg="",b.deleteField(c.field.key).then(function(a){c.onFieldsChange({fields:a.data})},f)["finally"](g))},c.toggleEdit=function(){c.editing=!c.editing},c.updateField=function(){c.loading||(c.loading=!0,c.errorMsg="",b.updateField(c.field).then(function(a){c.onFieldsChange({fields:a.data})},f)["finally"](g))};var f=function(b){c.errorMsg=b.data&&b.data.error||a.strings.fieldUpdateError},g=function(){c.loading=!1}}}}}]),USIN.mainCtrl=function(a,b){var c=this;c.strings=a.strings,c.fields=a.fields,c.errorMsg="",c.confirmMsg="",c.loading=!1;var d=function(){c.field={name:"",key:"",type:"text"}};d(),c.addField=function(e){c.loading||(c.loading=!0,c.errorMsg="",c.confirmMsg="",b.addField(c.field,e).then(function(a){c.fields=a.data,d()},function(b){406==b.status&&b.data&&b.data.confirm_required?c.confirmMsg=b.data.confirm_required:c.errorMsg=b.data&&b.data.error||a.strings.fieldUpdateError})["finally"](function(){c.loading=!1}))},c.cancelConfirm=function(a){c.confirmMsg=""},c.doOnFieldsChange=function(a){c.fields=a}},usinCustomFieldsApp.component("usinMain",{template:["$templateCache",function(a){return a.get("views/custom-fields/main.html")}],controller:["options","UsinCustomFieldsQuery",USIN.mainCtrl]}),usinCustomFieldsApp.factory("UsinCustomFieldsQuery",["options","$http",function(a,b){return{addField:function(c,d){var e=usinHelpers.url.addParam(a.ajaxURL,"action","usin_add_field"),f={nonce:a.nonce,field:c,force:d};return b({method:"post",url:e,data:f})},deleteField:function(c){var d=usinHelpers.url.addParam(a.ajaxURL,"action","usin_delete_field"),e={nonce:a.nonce,field_key:c};return b({method:"post",url:d,data:e})},updateField:function(c){var d=usinHelpers.url.addParam(a.ajaxURL,"action","usin_update_field"),e={nonce:a.nonce,field:c};return b({method:"post",url:d,data:e})}}}]);
//# sourceMappingURL=custom-fields.min.js.map